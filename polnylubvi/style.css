:root{
  --vh: 1vh; /* JS перезапишет */

  /* ===== ДЕСКТОП-НАСТРОЙКИ (как раньше у “проекции”) ===== */
  --desk-video-scale: 1.10;     /* как было в твоём CSS (ПК) */
 --video-filter: none;

}

html, body {
  margin: 0;
  padding: 0;
  background: #000;
  overflow: hidden;
}

body{
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

#app, #stage{
  position: fixed;
  inset: 0;
}

/* ============================================================
   ПРОЕКЦИЯ (теперь это ВИДЕО) — правая область
   Геометрию выставляет JS:
   - left/width — как было у проекции (справа от “видео-области”)
   - мягкий стык слева (fadeEdgePx)
============================================================ */
#proj-wrap{
  position: fixed;
  top: 0;
  left: 0;               /* JS перезапишет */
  width: 0;              /* JS перезапишет */
  height: calc(100 * var(--vh, 1vh));
  overflow: hidden;
  pointer-events: none;
  user-select: none;
  z-index: 2;
  display: none;         /* включаем только на ПК через JS */

  /* мягкая граница слева (основной способ) */
  -webkit-mask-image: linear-gradient(
    to right,
    rgba(0,0,0,0) 0,
    rgba(0,0,0,1) var(--fadeEdgePx, 170px),
    rgba(0,0,0,1) 100%
  );
  mask-image: linear-gradient(
    to right,
    rgba(0,0,0,0) 0,
    rgba(0,0,0,1) var(--fadeEdgePx, 170px),
    rgba(0,0,0,1) 100%
  );
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-size: 100% 100%;
  mask-size: 100% 100%;
}

/* fallback, если mask не сработал */
#proj-wrap::before{
  content:"";
  position:absolute;
  left:0;
  top:0;
  width: var(--fadeEdgePx, 170px);
  height:100%;
  pointer-events:none;
  background: linear-gradient(to right, rgba(0,0,0,1), rgba(0,0,0,0));
}

/* ============================================================
   ВИДЕО ВНУТРИ ПРОЕКЦИИ
   ВАЖНО: left/top/width/height задаёт JS, чтобы совпало 1-в-1
   с формулой проекции:
   dx=(W-dw)/2, dy=(H-dh)/2 + yShift
   + crop как у object-fit:cover + object-position:left bottom
============================================================ */
#bg-video{
  position: absolute;
  left: 0; top: 0;        /* JS перезапишет */
  width: 0; height: 0;    /* JS перезапишет */

  /* тут object-fit уже не нужен — мы двигаем/масштабируем геометрией */
  filter: var(--video-filter);
  pointer-events: none;
}

/* ============================================================
   PINK PANEL — слева, на всю высоту
   ширину задаёт JS (в px), углы прямые
============================================================ */
#pink-panel{
  position: fixed;
  left: 0;
  top: 0;
  bottom: 0;

  height: calc(100 * var(--vh, 1vh));
  width: 40vw; /* JS перезапишет */

  background: rgba(253, 176, 192, 0.55);
  border-radius: 0px;

  padding: 0;
  pointer-events: none;

  z-index: 10001;

  /* ===== мягкое появление ===== */
  opacity: 0;
  transition: opacity 650ms cubic-bezier(0.2, 0.9, 0.2, 1);
  will-change: opacity;
}
// ===== мягкое появление плашки (fade-in) =====
try {
  const reduce = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
  if (reduce) {
    panel.classList.add("is-shown");
  } else {
    requestAnimationFrame(() => panel.classList.add("is-shown"));
  }
} catch (_) {
  panel.classList.add("is-shown");
}

/* мобильная адаптация (НЕ ТРОГАЕМ) */
@media (hover: none) and (pointer: coarse){
  #pink-panel{
    left: 50%;
    top: 62vh;
    bottom: auto;
    transform: translateX(-50%);
    height: auto;
  }
}
